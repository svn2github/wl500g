Add missed urb->interval initialization for usbdevfs

--- linux-2.4.37/linux/drivers/usb/devio.c	2009-06-07 23:50:24.000000000 +0400
+++ linux/linux/drivers/usb/devio.c	2009-06-11 22:09:36.000000000 +0400
@@ -813,11 +813,11 @@ static int proc_submiturb(struct dev_sta
 		if ((ret = checkintf(ps, intf)))
 			return ret;
 	}
+	if (!(ep_desc = usb_epnum_to_ep_desc(ps->dev, uurb.endpoint)))
+		return -ENOENT;
 	switch(uurb.type) {
 	case USBDEVFS_URB_TYPE_CONTROL:
 		if ((uurb.endpoint & ~USB_ENDPOINT_DIR_MASK) != 0) {
-			if (!(ep_desc = usb_epnum_to_ep_desc(ps->dev, uurb.endpoint)))
-				return -ENOENT;
 			if ((ep_desc->bmAttributes & USB_ENDPOINT_XFERTYPE_MASK) != USB_ENDPOINT_XFER_CONTROL)
 				return -EINVAL;
 		}
@@ -915,6 +915,11 @@ static int proc_submiturb(struct dev_sta
 	as->urb.setup_packet = (unsigned char*)dr;
 	as->urb.start_frame = uurb.start_frame;
 	as->urb.number_of_packets = uurb.number_of_packets;
+	if (uurb.type == USBDEVFS_URB_TYPE_ISO ||
+			ps->dev->speed == USB_SPEED_HIGH)
+		as->urb.interval = 1 << min(15, ep_desc->bInterval - 1);
+	else
+		as->urb.interval = ep_desc->bInterval;
         as->urb.context = as;
         as->urb.complete = async_completed;
 	for (totlen = u = 0; u < uurb.number_of_packets; u++) {
