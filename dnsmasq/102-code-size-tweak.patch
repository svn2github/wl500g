From 2021c66251061960304177b5a5c4bb02d8176fc2 Mon Sep 17 00:00:00 2001
From: Simon Kelley <simon@thekelleys.org.uk>
Date: Mon, 7 May 2012 16:43:21 +0100
Subject: [PATCH 1/3] code-size tweak

---
 src/dnsmasq.c |   10 +++-------
 1 files changed, 3 insertions(+), 7 deletions(-)

diff --git a/src/dnsmasq.c b/src/dnsmasq.c
index 34c979b..1b951f0 100644
--- a/src/dnsmasq.c
+++ b/src/dnsmasq.c
@@ -1209,13 +1209,9 @@ void clear_cache_and_reload(time_t now)
     }
 #ifdef HAVE_DHCP6
   else if (daemon->ra_contexts)
-    {
-      /* Not doing DHCP, so no lease system, manage 
-	 alarms for ra only */
-      time_t next_event = periodic_ra(now);
-      if (next_event != 0)
-	alarm((unsigned)difftime(next_event, now)); 
-    }
+    /* Not doing DHCP, so no lease system, manage 
+       alarms for ra only */
+    send_alarm(periodic_ra(now), now);
 #endif
 #endif
 }
-- 
1.7.2.5

